## 什么是代理模式

代理模式是一种**结构型设计模式**，其主要目的是**为另一个对象提供一个替身或占位符，以控制对这个对象的访问**。代理对象会拦截对真实对象的请求，并在请求到达真实对象之前或之后执行额外的操作。

## 代理模式的优点

- **控制访问：** 代理可以在访问真实对象之前或之后执行检查、日志记录、缓存等操作，从而控制对真实对象的访问。
- **功能增强：** 可以在不修改真实对象代码的情况下，为真实对象的功能添加额外的职责。
- **延迟实例化（虚拟代理）：** 对于创建成本高昂的对象，可以延迟其创建，直到真正需要时才实例化。
- **解耦：** 客户端与真实对象的创建和生命周期管理解耦。
- **透明性：** 客户端可以通过与真实对象相同的接口来使用代理，通常无需知道它正在与代理而非真实对象交互。

## 代理模式的缺点

- **增加复杂性：** 引入了额外的代理类，增加了系统的类数量和复杂性。
- **性能开销：** 每次通过代理进行请求都会增加一层间接性，可能引入轻微的性能开销。
- **过度使用：** 如果不合理使用，可能会导致代理链过长，难以调试和理解。

## 代理模式的应用场景

- **当需要控制对某个对象的访问时（保护代理）。**
- **当需要延迟创建大型或昂贵对象时（虚拟代理）。**
- **当需要提供远程对象本地表示时（远程代理）。**
- **当需要在访问对象时执行额外操作时（智能引用）。**
- **日志记录、性能监控、缓存、权限管理等。**
- **Spring AOP (面向切面编程)：** 广泛使用代理模式来实现横切关注点（如事务管理、安全检查）。

``` mermaid
classDiagram
    class Subject {
        <<interface>>
        +request(): void
    }

    class RealSubject {
        +request(): void
    }

    class Proxy {
        -realSubject: RealSubject
        +Proxy(realSubject: RealSubject)
        +request(): void
    }

    Client --> Subject
    RealSubject ..|> Subject
    Proxy ..|> Subject
    Proxy --o RealSubject
```